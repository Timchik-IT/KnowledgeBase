[[Классы, структуры и пространства имен в dotnet]]

Кроме обычных методов в языке C# предусмотрены специальные методы доступа, которые называют **свойства**. Они обеспечивают простой доступ к полям классов и структур, узнать их значение или выполнить их установку.

### Определение свойств

Стандартное описание свойства имеет следующий синтаксис:

``` cs 
[модификаторы] тип_свойства название_свойства
{
    get { действия, выполняемые при получении значения свойства}
    set { действия, выполняемые при установке значения свойства}
}
```

Вначале определения свойства могут идти различные модификаторы, в частности, модификаторы доступа. Затем указывается тип свойства, после которого идет название свойства. Полное определение свойства содержит два блока: `get` и `set`.

В блоке `get` выполняются действия по получению значения свойства. В этом блоке с помощью оператора return возвращаем некоторое значение.

В блоке `set` устанавливается значение свойства. В этом блоке с помощью параметра value мы можем получить значение, которое передано свойству.

Блоки `get` и `set` еще называются акссесорами или методами доступа (к значению свойства), а также геттером и сеттером.

Пример: 
``` cs 
Person person = new Person();
 
Console.WriteLine(person.Age);  // 1
person.Age = 37;
Console.WriteLine(person.Age);  // 37
person.Age = -23;
Console.WriteLine(person.Age);  // 37 
 
class Person
{
    int age = 1;
    
    public int Age
    {
        set
        {
            if (value < 1 || value > 120)
                Console.WriteLine
                ("Возраст должен быть в диапазоне от 1 до 120");
            else
                age = value;
        }
        get { return age; }
    }
}
```

### Свойства только для чтения и записи

Блоки set и get не обязательно одновременно должны присутствовать в свойстве. Если свойство определяет только блок `get`, то такое свойство доступно только для чтения - мы можем получить его значение, но не установить.

И, наоборот, если свойство имеет только блок `set`, тогда это свойство доступно только для записи - можно только установить значение, но нельзя получить:

``` cs 
// свойство только для записи
public int Age
{
    set { age = value; }
}

// свойство только для чтения
public string Name
{
    get { return name; }
}
```

### Ограничения 

При использовании модификаторов в свойствах следует учитывать ряд ограничений:

- Модификатор для блока `set` или `get` можно установить, если свойство имеет оба блока (и set, и get)

- Только один блок `set` или `get` может иметь модификатор доступа, но не оба сразу

- Модификатор доступа блока `set` или `get` должен быть более ограничивающим, чем модификатор доступа свойства. Например, если свойство имеет модификатор `public`, то блок `set/get` может иметь только модификаторы `protected internal`, `internal`, `protected`, `private protected` и `private`

### Автоматические свойства

Свойства управляют доступом к полям класса. Однако что, если у нас с десяток и более полей, то определять каждое поле и писать для него однотипное свойство было бы утомительно. Поэтому в .NET были добавлены автоматические свойства. Они имеют сокращенное объявление:

``` cs 
class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    
    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
}

class Person1
{
    public string Name { get; set; } = "Tom";
    public int Age { get; set; } = 37;
}


class Person2
{
    public string Name { private set; get;}
    public Person(string name) => Name = name;
}

class Person3
{
    public string Name { get; } = "Tom";
    public Person(string name) => Name = name;
}
```

### Сокращенная запись свойств

Как и методы, мы можем сокращать определения свойств. Поскольку блоки `get` и `set` представляют специальные методы, то как и обычные методы, если они содержат одну инструкцию, то мы их можем сократить с помощью оператора `=>`:

``` cs 
class Person
{
    string name;
    
    public string Name 
    { 
        get => name;
        set => name = value; 
    }
}

class Person1
{
    string name;
     
    // эквивалентно public string Name { get { return name; } }
    public string Name => name;
}
```

