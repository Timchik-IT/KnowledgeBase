[[Классы, структуры и пространства имен в dotnet]]

Наряду с [[Класс|классами]] структуры представляют еще один способ создания собственных типов данных в C#. Более того многие примитивные типы, например, int, double и т.д., по сути являются структурами.

### Определение структуры

Для определения структуры применяется ключевое слово `struct`:

Как и [[Класс|классы]], структуры могут хранить состояние в виде полей (переменных) и определять поведение в виде методов. Например, добавим в структуру Person пару полей и метод:

``` cs
struct Person
{
    public string name;
    public int age;
    
    public void Print()
    {
        Console.WriteLine($"Имя: {name}  Возраст: {age}");
    }
}
```

И как и в случае с [[Класс|классами]], для обращения к функциональности структуры - полям, методам и другим компонентам структуры применяется точечная нотация - после объекта структуры ставится точка, а затем указывается компонент структуры:

``` cs
объект.поле_структуры
объект.метод_структуры(параметры_метода)
```
### Создание объекта структуры

#### Инициализация с помощью конструктора

Для использования структуры ее необходимо инициализировать. Для инициализации создания объектов структуры, как и в случае с классами, применяется вызов конструктора с оператором `new`.

Можно непосредственно инициализировать структуру и только после задать ей некие данные. 

Также как и классы структуры поддерживают конструкторы.

### Копирование структуры с помощью with

Если нам необходимо скопировать в один объект структуры значения из другого с небольшими изменениями, то мы можем использовать оператор with:

``` cs
Person tom = new Person { name = "Tom", age = 22 };
Person bob = tom with { name = "Bob" };
bob.Print();    // Имя: Bob  Возраст: 22
```

### Отличие от классов 

Структура схожа с классом, она так же может иметь в себе перечень неких данных и даже методов.

Но: структура не поддерживает наследование, имплементирование, ее можно объявить внутри класса, структура является дополнительным сборным типом данных.

_Структура (struct) является типом значения. При создании структуры переменная, которой присвоена структура, содержит фактические данные этой структуры. Если структура присваивается новой переменной, все данные копируются. Таким образом, новая переменная и исходная переменная содержат две отдельные копии одинаковых данных. Изменения, внесенные в одну копию, не влияют на другую._

_В общем случае классы используются для моделирования более сложного поведения или для таких данных, которые будут изменяться после создания объекта класса. Структуры лучше подходят для небольших структур данных, информация в которых не должна изменяться после создания структуры._
#### Структура хранится в стеке памяти, классы же находятся в куче. Классы ссылочный тип данных, структуры же - значимые.
