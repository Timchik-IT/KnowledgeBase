[[ARP]]
### **Что такое Proxy ARP:**

**Proxy ARP** — это техника, при которой устройство, обычно маршрутизатор, отвечает на ARP-запросы, предназначенные для другого устройства, как если бы оно само было этим устройством.

Маршрутизатор "подменяет" своё устройство, отправляя собственный MAC-адрес в ответ на ARP-запрос.

### **Как работает Proxy ARP:**

Если хост A пытается связаться с хостом D в другой подсети, он отправляет ARP-запрос, считая, что D находится в его локальной сети.

Маршрутизатор, получив ARP-запрос, понимает, что D находится за его пределами, и отвечает, отправляя свой MAC-адрес вместо MAC-адреса хоста D.

Хост A добавляет в свою ARP-таблицу запись, указывающую, что адрес D соответствует MAC-адресу маршрутизатора. Все пакеты для D теперь направляются к маршрутизатору.

#### **Пример из файла:**

Хост A (172.16.10.100) отправляет запрос для MAC-адреса хоста D (172.16.20.200).
  
Маршрутизатор отвечает своим MAC-адресом, и хост A считает, что этот MAC-адрес принадлежит хосту D.


### **Преимущества Proxy ARP:**

- Простота настройки: Proxy ARP можно включить на маршрутизаторе без необходимости изменений в настройках хостов.

- Подходит для сетей, где устройства не настроены с маршрутом по умолчанию или маршрутизирующими таблицами.

### **Недостатки Proxy ARP:**
- Увеличение ARP-трафика.
- Рост размеров ARP-таблиц.
- Возможные уязвимости в безопасности: возможно ARP-спуфинг.
- Неэффективность в сложных сетевых топологиях.
### **Как включить/отключить Proxy ARP:**

- **Включение:**

`interface ethernet 0 ip proxy-arp`

- **Отключение:**

`interface ethernet 0 no ip proxy-arp`

### **Когда Proxy ARP не работает:**

- В сетях, где ARP не используется для разрешения адресов.
- При наличии сложных топологий с несколькими маршрутизаторами.


#### **Настройка ARP:**

1. **Добавление статических записей:**
    
    `arp [IP-адрес] [MAC-адрес] arpa`
    
2. **Настройка времени жизни для динамических записей:**
	
    `interface [interface_name] arp timeout [время в секундах]`
    
3. **Отключение Proxy ARP на уровне интерфейса:**
    
    `interface [interface_name] no ip proxy-arp`
	

#### **Инструменты проверки и отладки ARP:**

1. **Просмотр ARP-таблицы:**
	
    `show arp`
    
2. **Просмотр настроек Proxy ARP:**
    
    `show ip interface [interface_name]`
    
3. **Очистка ARP-кэша:**
    
    `clear arp-cache`
	

#### **Основные ограничения:**

- ARP не работает в сетях, которые не используют широковещательные запросы (например, Frame Relay).
- Использование Proxy ARP может привести к дополнительным уязвимостям в безопасности, таким как ARP-спуфинг.